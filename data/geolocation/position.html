<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <script type="text/javascript">
    var result = null;

    function handlePosition(position) {
      result.innerHTML = position.coords.latitude + " " + position.coords.longitude;
    }

    function handleError(error) {
      switch (error.code) {
        case error.PERMISSION_DENIED:
          result.innerHTML = "denied";
          break;
        case error.POSITION_UNAVAILABLE:
          result.innerHTML = "unavailable";
          break;
        case error.TIMEOUT:
          result.innerHTML = "timed_out";
          break;
        case error.UNKNOWN_ERROR:
          result.innerHTML = "unknown_error";
          break;
        default:
          result.innerHTML = "Unknown error code: " + error.code;
      }
    }

    function init() {
      result = document.getElementById("result");

      if (navigator.geolocation)
        navigator.geolocation.getCurrentPosition(handlePosition, handleError,
                                                 {enableHighAccuracy: false, timeout: 30000});
      else
        result.innerHTML = "not available";
    }

  </script>
</head>
<body onload="init()">
  <p id="result">undefined</p>
</body>
</html>
